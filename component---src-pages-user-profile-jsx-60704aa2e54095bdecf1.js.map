{"version":3,"sources":["webpack:///./src/views/comp-password-change-form.jsx","webpack:///./src/components/PasswordChange/PasswordChangeForm.tsx","webpack:///./src/components/LoginManagement/strapi.jsx","webpack:///./src/views/page-user-profile.jsx","webpack:///./src/pages/user/profile.jsx","webpack:///./src/constants/providers.ts"],"names":["CompPasswordChangeForm","t","onSubmit","oldPassword","newPassword","newPasswordConfirmation","onChange","isSubmitButtonDisabled","errorMessage","name","value","type","placeholder","disabled","INITIAL_STATE","error","PasswordChangeForm","state","onUpdateField","e","setState","target","event","a","preventDefault","changePassword","res","kind","render","this","_isValidPassword","props","Component","form","LoginManagement","_initFirebase","onSocialLoginLink","provider","onDefaultLoginLink","password","onUnlink","providerId","activeSignInMethods","componentDidMount","componentDidUpdate","SIGN_IN_METHODS","map","signInMethod","onlyOneLeft","length","isEnabled","includes","id","key","onLink","message","SocialLoginToggle","onClick","DefaultLoginToggle","passwordOne","passwordTwo","isInvalid","withTranslation","user","Layout","SEO","title","email","authUser","UserProfilePage","isLoggedIn","UserProfileView","getUser","providers","enabled","getLinkUrl","providerName","API_BASE_URL"],"mappings":"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","file":"component---src-pages-user-profile-jsx-60704aa2e54095bdecf1.js","sourcesContent":["import React from 'react';\n\n/**\n * Password change form view\n * \n * @param {TFunction} t i18n function\n * @param {(e: FormEvent<Element>) => Promise<void>} onSubmit\n * @param {string} oldPassword\n * @param {string} newPassword\n * @param {string} newPasswordConfirmation\n * @param {(e: ChangeEvent<Element>) => void} onChange\n * @param {boolean} isSubmitButtonDisabled\n * @param {string} errorMessage\n */\nconst CompPasswordChangeForm = ({\n  t,\n  onSubmit,\n  oldPassword,\n  newPassword,\n  newPasswordConfirmation,\n  onChange,\n  isSubmitButtonDisabled,\n  errorMessage\n}) => (\n  <form onSubmit={onSubmit}>\n    <input\n      name=\"oldPassword\"\n      value={oldPassword}\n      onChange={onChange}\n      type=\"password\"\n      placeholder=\"Current Password\"\n    /> <br/>\n    <input\n      name=\"newPassword\"\n      value={newPassword}\n      onChange={onChange}\n      type=\"password\"\n      placeholder=\"New Password\"\n    /> <br/>\n    <input\n      name=\"newPasswordConfirmation\"\n      value={newPasswordConfirmation}\n      onChange={onChange}\n      type=\"password\"\n      placeholder=\"New Password Confirmation\"\n    /> <br/>\n    <button disabled={isSubmitButtonDisabled} type=\"submit\">\n      {t('auth.form-change-password-button')}\n    </button> <br/>\n\n    {errorMessage && <p>{errorMessage}</p>}\n  </form>\n);\n\nexport default CompPasswordChangeForm;\n","import React, { Component } from 'react';\n\nimport { changePassword } from '../../services/auth';\nimport { ComponentProps } from '../ComponentProps.d';\n\nimport CompPasswordChangeForm from '../../views/comp-password-change-form';\n\nconst INITIAL_STATE = {\n  oldPassword: '',\n  newPassword: '',\n  newPasswordConfirmation: '',\n  error: '',\n};\n\ninterface PasswordChangeFormProps extends ComponentProps {}\ntype PasswordChangeStates = typeof INITIAL_STATE;\n\nclass PasswordChangeForm extends Component<PasswordChangeFormProps, PasswordChangeStates> {\n  state = INITIAL_STATE;\n\n  onUpdateField = (e: React.ChangeEvent): void => {\n    //@ts-ignore\n    this.setState({[e.target.name]: e.target.value});\n  }\n\n  onSubmit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n\n    const res = await changePassword(this.state.oldPassword, this.state.newPassword, this.state.newPasswordConfirmation);\n    if (res.kind === 'ok') {\n      this.setState({...INITIAL_STATE, error: 'success'});\n    }\n    else {\n      this.setState({ error: res.kind });\n    }\n  };\n\n  render(): React.ReactElement {\n    const { oldPassword, newPassword, newPasswordConfirmation, error } = this.state;\n    const isSubmitButtonDisabled = !_isValidPassword(this.state);\n\n    return (\n      <CompPasswordChangeForm\n        onSubmit={this.onSubmit}\n        oldPassword={oldPassword}\n        newPassword={newPassword}\n        newPasswordConfirmation={newPasswordConfirmation}\n        onChange={this.onUpdateField}\n        isSubmitButtonDisabled={isSubmitButtonDisabled}\n        errorMessage={error}\n        {...this.props}\n      />\n    );\n  }\n}\n\nexport {\n  PasswordChangeForm\n}\n\nconst _isValidPassword = (form: any): boolean => (\n  form.oldPassword !== '' &&\n  form.newPassword !== '' &&\n  form.newPasswordConfirmation !== '' &&            // not empty value\n  form.oldPassword !== form.newPassword &&          // diff with old one\n  form.newPassword === form.newPasswordConfirmation // same with confirmation one\n);\n","import React, { Component } from 'react';\n\nimport SIGN_IN_METHODS, {getLinkUrl} from '../../constants/providers';\n\nclass LoginManagement extends Component {\n  _initFirebase = false;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeSignInMethods: [],\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n  }\n\n  componentDidUpdate() {\n  }\n\n  onSocialLoginLink = provider => {\n  };\n\n  onDefaultLoginLink = password => {\n  };\n\n  onUnlink = providerId => {\n  };\n\n  render() {\n    const { activeSignInMethods, error } = this.state;\n\n    return (\n      <div>\n        <ul>\n          {SIGN_IN_METHODS.map(signInMethod => {\n            const onlyOneLeft = activeSignInMethods.length === 1;\n            const isEnabled = activeSignInMethods.includes(\n              signInMethod.id,\n            );\n\n            return (\n              <li key={signInMethod.id}>\n                {signInMethod.id === 'password' ? (\n                  <DefaultLoginToggle\n                    onlyOneLeft={onlyOneLeft}\n                    isEnabled={isEnabled}\n                    signInMethod={signInMethod}\n                    onLink={this.onDefaultLoginLink}\n                    onUnlink={this.onUnlink}\n                  />\n                ) : (\n                  <SocialLoginToggle\n                    onlyOneLeft={onlyOneLeft}\n                    isEnabled={isEnabled}\n                    signInMethod={signInMethod}\n                    onLink={this.onSocialLoginLink}\n                    onUnlink={this.onUnlink}\n                  />\n                )}\n              </li>\n            );\n          })}\n        </ul>\n        {error && error.message}\n      </div>\n    );\n  }\n}\n\nconst SocialLoginToggle = ({\n  onlyOneLeft,\n  isEnabled,\n  signInMethod,\n  onLink,\n  onUnlink,\n}) =>\n  isEnabled ? (\n    <button\n      type=\"button\"\n      onClick={() => onUnlink(signInMethod.id)}\n      disabled={onlyOneLeft}\n    >\n      Deactivate {signInMethod.id}\n    </button>\n  ) : (\n    <button\n      type=\"button\"\n      onClick={() => onLink(signInMethod.provider)}\n    >\n      Link {signInMethod.id}\n    </button>\n  );\n\nclass DefaultLoginToggle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { passwordOne: '', passwordTwo: '' };\n  }\n\n  onSubmit = event => {\n    event.preventDefault();\n\n    this.props.onLink(this.state.passwordOne);\n    this.setState({ passwordOne: '', passwordTwo: '' });\n  };\n\n  onChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  render() {\n    const {\n      onlyOneLeft,\n      isEnabled,\n      signInMethod,\n      onUnlink,\n    } = this.props;\n\n    const { passwordOne, passwordTwo } = this.state;\n\n    const isInvalid =\n      passwordOne !== passwordTwo || passwordOne === '';\n\n    return isEnabled ? (\n      <button\n        type=\"button\"\n        onClick={() => onUnlink(signInMethod.id)}\n        disabled={onlyOneLeft}\n      >\n        Deactivate {signInMethod.id}\n      </button>\n    ) : (\n      <form onSubmit={this.onSubmit}>\n        <input\n          name=\"passwordOne\"\n          value={passwordOne}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"New Password\"\n        />\n        <input\n          name=\"passwordTwo\"\n          value={passwordTwo}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"Confirm New Password\"\n        />\n\n        <button disabled={isInvalid} type=\"submit\">\n          Link {signInMethod.id}\n        </button>\n      </form>\n    );\n  }\n}\n\nexport {\n  LoginManagement\n}\n","\nimport React from 'react';\nimport { withTranslation } from \"react-i18next\"\n\nimport { Layout } from \"../components/Layout\";\nimport SEO from \"../components/SEO\";\nimport { PasswordChangeForm } from \"../components/PasswordChange\";\nimport { LoginManagement } from \"../components/LoginManagement\";\n\nconst I18N_ID = 'Others';\n\n/**\n * User Profile\n * \n * @param {function} t i18n function\n */\nconst PageUserProfile = ({\n  t, user\n}) => (\n  <Layout>\n    {/* page title */}\n    <SEO title={t(\"user.home\")} />\n\n    <h3>{t(\"user.account\")}: {user.email}</h3>\n\n    <br/>\n    <h5>{t(\"user.change-password\")}: </h5>\n    <PasswordChangeForm t={t}/>\n\n    <br/>\n    <h5>{t(\"user.signin-method\")}: </h5>\n    <LoginManagement authUser={user} />\n  \n  </Layout>\n);\n\nexport default withTranslation(I18N_ID)(PageUserProfile);\n","import React from 'react';\n\nimport { getUser, isLoggedIn } from '../../services/auth';\n\nimport UserProfileView from '../../views/page-user-profile';\n\nconst UserProfilePage = () => isLoggedIn() \n  ? UserProfileView({user: getUser()})\n  : null;\n\nexport default () => (\n  <>\n    <UserProfilePage />\n  </>\n);\n","import {API_BASE_URL} from '../config';\n\nconst providers = [\n//  'discord', \n//  'facebook', \n//  'github', \n{id: 'email', provider: 'email', enabled: true},\n{id: 'google.com', provider: 'google', enabled: true}\n//  'microsoft', \n//  'twitch', \n//  'twitter'\n];\n\nexport function getLinkUrl(providerName: string): string {\n  return `${API_BASE_URL}/connect/${providerName}`;\n}\n\nexport function isAvailable(providerId: string): boolean {\n  for (let i = 0; i < providers.length; i ++) {\n    if (providerId === providers[i].id) return providers[i].enabled;\n  }\n  return false;\n}\n\nexport default providers;\n"],"sourceRoot":""}